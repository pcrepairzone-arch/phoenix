# Makefile for RISC OS Phoenix â€“ full system build
TARGET = phoenix64.img

all: kernel drivers net wimp

kernel:
    make -C kernel

drivers:
    make -C drivers/nvme
    make -C drivers/usb
    make -C drivers/bluetooth
    make -C drivers/gpu

net:
    make -C net

wimp:
    make -C wimp

clean:
    make -C kernel clean
    make -C drivers/nvme clean
    # ... (clean all)

# Final image link
phoenix64.img: all
    arm-none-eabi-ld -T kernel.ld -o phoenix64.elf kernel/*.o drivers/**/*.o net/*.o wimp/*.o
    arm-none-eabi-objcopy -O binary phoenix64.elf phoenix64.img